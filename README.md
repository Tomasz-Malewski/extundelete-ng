# extundelete

ExtUndelete 2025 Edition - When debugfs and testdisk failed and you have modern e2fsprogs 1.24+ installed. 

Installation:
git clone https://github.com/Tomasz-Malewski/extundelete-ng.git
./configure
make 

inside src folder you will find:
extundelete

Usage:
./extundelete media_blob_name --restore-all

P.S. If you are lazy you can try to run binary from /src but depends on your linux version it will not work. 

This is a modernized fork of the original extundelete, updated to support the latest versions of e2fsprogs (1.24+), 
including recent changes to the ext4 filesystem such as 64-bit block support.
The original extundelete project has not seen active development since 2013. 
While a patch was introduced in 2019 to address a specific compilation issue (source), 
many deeper compatibility challenges remained due to the evolving ext4 internals and journaling mechanisms. 
This fork brings the codebase up to date, restores buildability on modern systems and introduces improved verbosity 
for better debugging and logging.

Extundelete (2025 editions) remains one of the tool capable of recovering deleted files from ext4 filesystems using journal-based analysis. 
This fork has been tested extensively and is able to successfully recover large files (like VM image, SQL database) in a variety of deletion scenarios.
Smaller files are more challenging to recover (forget) as ext4 often stores their content directly within the inode inline_data
rather than in allocated data blocks. Since this data never reaches the journal or disk blocks in a traditional sense recovery is generally impossible without best-effort block matching - use then ext4magic. 

* Compatible with e2fsprogs 1.24+ (tested with e2fsprogs 1.47.2-2 Archlinux kernel 6.14.9, gcc 15.1.1)
* Successfully recovers large files vhd, iso, db from ext4 partitions
* Improved logging and verbosity for easier debugging
* Tested against real-world deletion scenarios - I spent my time in rollup so enjoy everyone
* There are 70% failure rate, just run multiple time until file restoration complete. It works :)

== Known limitations

Some edge cases may still cause segmentation faults - running the tool multiple times often increases recovery success (15â€“30% variation observed).
Small files (typically <8MB) may not be recoverable if their content was never written to a data block or shared.

In tests involving multi-gigabyte files and active ext4 volumes, this fork has been able to recover files that other tools - including debugfs, testdisk, and the original extundelete - could not. 






Example output:
```
Searching for recoverable inodes in directory / ...
3 recoverable inodes found.
Deleted inodes:  21   22   23   Recoverable inodes:  21   22   23   Looking through the directory structure for deleted files ...
oldblks contains: 82088 83196
3 recoverable inodes still lost.
oldblks contains: 84332 84338 84344 84392 84440 84446 84452 84458 84464 84470 84518 84524 84572 84578 84626 84632 84638 84644 84692 84698 84704 84710 84716 84722 84728 84734 84740 84746 84794 84800 84806 84812 84818 84866 84872 84878 84884 84890 84896 84902 84950 84956 85004 85010 85016 85022 85028 85034 85082 85088 85094 85100 85148 85154 85202 85208 85214 85220 85226 85232 85238 85244 85250 85256 85262 85310 85358 85364 85412 85418 85424 85472 85478 85484 85490 85496 85502 85508 85556 85604 85610 85616 85622 85628 85634 85640 85646 85652 85658 85664 85670 85676 85682 85688 85694 85700 85706 85754 85760 85766 85814 85820 85826 85832 85838 85844 85850 85856 85904 85910 85916 85964 85970 85976 85982 85988 85994 81923 81929 81977 81983 81989 81995 82092 82095 82100 82105 82110 82115 82120 82125 82130 82135 82140 82145 82150 82155 82160 82165 82170 82175 82180 82185 82190 82195 82200 82205 82210 82215 82220 82225 82230 82235 82240 82245 82250 82255 82260 82265 82270 82275 82280 82285 82290 82295 82301 82308 82315 82322 82329 82378 82427 82434 82441 82448 82455 82462 82469 82518 82567 82574 82623 82672 82679 82728 82734 82740 82746 82794 82800 82806 82812 82818 82866 82872 82920 82968 83016 83022 83070 83076 83082 83088 83094 83142 83259 83264 83269 83274 83279 83284 83289 83294 83299 83304 83309 83314 83319 83324 83329 83334 83339 83344 83349 83354 83359 83364 83369 83374 83379 83384 83389 83394 83399 83404 83409 83414 83420 83469 83476 83483 83490 83497 83504 83511 83518 83525 83532 83581 83630 83637 83644 83651 83700 83707 83714 83721 83728 83735 83742 83749 83756 83763 83770 83777 83784 83835 83841 83847 83853 83859 83907 83913 83919 83925 83931 83979 83985 83991 83997 84045 84093 84141 84147 84153 84159 84165 84171 84177 84183 84231 84281 84286 84291 84294 84302 84315 84328
Unable to restore inode 21 (file.21): No data found.
oldblks contains: 84332 84338 84344 84392 84440 84446 84452 84458 84464 84470 84518 84524 84572 84578 84626 84632 84638 84644 84692 84698 84704 84710 84716 84722 84728 84734 84740 84746 84794 84800 84806 84812 84818 84866 84872 84878 84884 84890 84896 84902 84950 84956 85004 85010 85016 85022 85028 85034 85082 85088 85094 85100 85148 85154 85202 85208 85214 85220 85226 85232 85238 85244 85250 85256 85262 85310 85358 85364 85412 85418 85424 85472 85478 85484 85490 85496 85502 85508 85556 85604 85610 85616 85622 85628 85634 85640 85646 85652 85658 85664 85670 85676 85682 85688 85694 85700 85706 85754 85760 85766 85814 85820 85826 85832 85838 85844 85850 85856 85904 85910 85916 85964 85970 85976 85982 85988 85994 81923 81929 81977 81983 81989 81995 82092 82095 82100 82105 82110 82115 82120 82125 82130 82135 82140 82145 82150 82155 82160 82165 82170 82175 82180 82185 82190 82195 82200 82205 82210 82215 82220 82225 82230 82235 82240 82245 82250 82255 82260 82265 82270 82275 82280 82285 82290 82295 82301 82308 82315 82322 82329 82378 82427 82434 82441 82448 82455 82462 82469 82518 82567 82574 82623 82672 82679 82728 82734 82740 82746 82794 82800 82806 82812 82818 82866 82872 82920 82968 83016 83022 83070 83076 83082 83088 83094 83142 83259 83264 83269 83274 83279 83284 83289 83294 83299 83304 83309 83314 83319 83324 83329 83334 83339 83344 83349 83354 83359 83364 83369 83374 83379 83384 83389 83394 83399 83404 83409 83414 83420 83469 83476 83483 83490 83497 83504 83511 83518 83525 83532 83581 83630 83637 83644 83651 83700 83707 83714 83721 83728 83735 83742 83749 83756 83763 83770 83777 83784 83835 83841 83847 83853 83859 83907 83913 83919 83925 83931 83979 83985 83991 83997 84045 84093 84141 84147 84153 84159 84165 84171 84177 84183 84231 84281 84286 84291 84294 84302 84315 84328
Unable to restore inode 22 (file.22): No data found.
oldblks contains: 84332 84338 84344 84392 84440 84446 84452 84458 84464 84470 84518 84524 84572 84578 84626 84632 84638 84644 84692 84698 84704 84710 84716 84722 84728 84734 84740 84746 84794 84800 84806 84812 84818 84866 84872 84878 84884 84890 84896 84902 84950 84956 85004 85010 85016 85022 85028 85034 85082 85088 85094 85100 85148 85154 85202 85208 85214 85220 85226 85232 85238 85244 85250 85256 85262 85310 85358 85364 85412 85418 85424 85472 85478 85484 85490 85496 85502 85508 85556 85604 85610 85616 85622 85628 85634 85640 85646 85652 85658 85664 85670 85676 85682 85688 85694 85700 85706 85754 85760 85766 85814 85820 85826 85832 85838 85844 85850 85856 85904 85910 85916 85964 85970 85976 85982 85988 85994 81923 81929 81977 81983 81989 81995 82092 82095 82100 82105 82110 82115 82120 82125 82130 82135 82140 82145 82150 82155 82160 82165 82170 82175 82180 82185 82190 82195 82200 82205 82210 82215 82220 82225 82230 82235 82240 82245 82250 82255 82260 82265 82270 82275 82280 82285 82290 82295 82301 82308 82315 82322 82329 82378 82427 82434 82441 82448 82455 82462 82469 82518 82567 82574 82623 82672 82679 82728 82734 82740 82746 82794 82800 82806 82812 82818 82866 82872 82920 82968 83016 83022 83070 83076 83082 83088 83094 83142 83259 83264 83269 83274 83279 83284 83289 83294 83299 83304 83309 83314 83319 83324 83329 83334 83339 83344 83349 83354 83359 83364 83369 83374 83379 83384 83389 83394 83399 83404 83409 83414 83420 83469 83476 83483 83490 83497 83504 83511 83518 83525 83532 83581 83630 83637 83644 83651 83700 83707 83714 83721 83728 83735 83742 83749 83756 83763 83770 83777 83784 83835 83841 83847 83853 83859 83907 83913 83919 83925 83931 83979 83985 83991 83997 84045 84093 84141 84147 84153 84159 84165 84171 84177 84183 84231 84281 84286 84291 84294 84302 84315 84328
Restored inode 23 to file RECOVERED_FILES/file.23
corrupted size vs. prev_size while consolidating
Aborted (core dumped)
```
Don't worry about core dumped. Keep running it multiple times. 

